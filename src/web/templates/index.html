<!DOCTYPE html>
<html>
	<head>
		<title>Arduairmon</title>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.13.0/moment.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
	</head>

	<body>
		<canvas id="temperature_and_humidity"></canvas>
		<script>
			var None = null;
			var rawData = {
				date: {{ raw_data.date |safe }},
				temperature: {{ raw_data.temperature | safe }},
				humidity: {{ raw_data.humidity | safe }},
				vcc: {{ raw_data.vcc | safe }}
			};

			var timeFormat = 'YYYY-MM-DD HH:mm:ss.SSSSSS';

			var ctx = document.getElementById('temperature_and_humidity').getContext('2d');

			var chart = new Chart(ctx, {
				type: 'line',
				data: {
					labels: rawData.date,
					datasets: [{
						label: "Temperature",
						fill: false,
						backgroundColor: 'rgb(255, 99, 132)',
						borderColor: 'rgb(255, 99, 132)',
						data: rawData.temperature,
						yAxisID: 'temp-axis',
						pointRadius: 0,
						fill: false,
						lineTension: 0,
						borderWidth: 2
					},{
						label: "relative Humidity",
						fill: false,
						backgroundColor: 'rgb(99, 132, 255)',
						borderColor: 'rgb(99, 132, 255)',
						data: rawData.humidity,
						yAxisID: 'hum-axis',
						pointRadius: 0,
						fill: false,
						lineTension: 0,
						borderWidth: 2
					}]
				},

				// Configuration options go here
				options: {
					responsive: true,
					hoverMode: 'index',
					stacked: false,
					title: {
						display: true,
						text: 'Temperature and reltaive Humidity'
					},
					scales: {
						xAxes: [{
							type: 'time',
							time: {
								format: timeFormat,
								// round: 'day'
								tooltipFormat: 'll HH:mm'
							},
							scaleLabel: {
								display: true,
								labelString: 'Date'
							}
						}],
						yAxes: [{
							type: 'linear',
							display: true,
							position: 'left',
							id: 'temp-axis',
							ticks: {
								min: -5,
								max: 45
							},
						}, {
							type: 'linear',
							display: true,
							position: 'right',
							id: 'hum-axis',
							ticks: {
								min: 0,
								max: 100
							},

							gridLines: {
								drawOnChartArea: false,
							},
						}],
					}
				}
			});
		</script>
	</body>

</html>
